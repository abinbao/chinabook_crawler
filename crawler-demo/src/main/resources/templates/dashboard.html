<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title>信息采集系统</title>

<link th:href="@{/css/bootstrap.min.css}" rel="stylesheet" />
<link th:href="@{/font-awesome/css/font-awesome.css}" rel="stylesheet" />

<link th:href="@{/css/animate.css}" rel="stylesheet" />
<link th:href="@{/css/style.css}" rel="stylesheet" />

</head>

<body>
    <div id="wrapper">
    		<nav class="navbar-default navbar-static-side" role="navigation" th:include="nav :: navigation"></nav>
	    <div id="page-wrapper" class="gray-bg">
	        	<div class="border-bottom" th:include="header :: headerTop"></div>
	            <div class="wrapper wrapper-content">
		        		<div class="row">
	                    <div class="col-lg-3">
	                        <div class="ibox float-e-margins">
	                            <div id="first"></div>
	                        </div>
	                    </div>
	                    <div class="col-lg-3">
	                        <div class="ibox float-e-margins">
	                            <div id="sec"></div>
	                        </div>
	                    </div>
	                    <div class="col-lg-3">
	                        <div class="ibox float-e-margins">
	                            <div id="third"></div>
	                        </div>
	                    </div>
	                    <div class="col-lg-3">
	                        <div class="ibox float-e-margins">
	                            <div id="fourth"></div>
	                    		</div>
	        				</div>
					</div>
					<div class="row">
	                    <div class="col-lg-4">
	                        <div class="ibox float-e-margins">
	                            <div class="ibox-title">
	                                <h5>中国图书网（类别2）数量统计排名</h5>
	                                <div class="ibox-tools">
	                                    <a class="collapse-link">
	                                        <i class="fa fa-chevron-up"></i>
	                                    </a>
	                                    <a class="close-link">
	                                        <i class="fa fa-times"></i>
	                                    </a>
	                                </div>
	                            </div>
	                            <div class="ibox-content">
	                                <div class="feed-activity-list">
	                                		<div id="category2"></div>
	                                </div>
	                            </div>
	                         </div>
	                    </div>
	                    <div class="col-lg-4">
	                        <div class="ibox float-e-margins">
	                            <div class="ibox-title">
	                                <h5>中国图书网（售价）书籍统计排名</h5>
	                                <div class="ibox-tools">
	                                    <a class="collapse-link">
	                                        <i class="fa fa-chevron-up"></i>
	                                    </a>
	                                    <a class="close-link">
	                                        <i class="fa fa-times"></i>
	                                    </a>
	                                </div>
	                            </div>
	                            <div class="ibox-content">
	                                <div class="feed-activity-list">
	                                		<div id="sellprice"></div>
	                                </div>
	                            </div>
	                         </div>
	                    </div>
	                    <div class="row">
                    <div class="col-lg-4">
                        <div class="ibox float-e-margins">
                            <div class="ibox-title">
                                <h5>中国图书网（折扣）书籍统计排名</h5>
                                <div class="ibox-tools">
                                    <a class="collapse-link">
                                        <i class="fa fa-chevron-up"></i>
                                    </a>
                                    <a class="close-link">
                                        <i class="fa fa-times"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="ibox-content">
                                <div class="feed-activity-list">
                                		<div id="discount"></div>
                                </div>
                            </div>
                         </div>
                    </div>
               </div>
	               </div>
			</div>
	    		<div class="footer" th:include="footer :: copyright"></div>
 		</div>
    </div>
	
    <!-- Mainly scripts -->
    <script th:src="@{/js/jquery-2.1.1.js}"></script>
    <script th:src="@{/js/bootstrap.min.js}"></script>
    <script th:src="@{/js/plugins/metisMenu/jquery.metisMenu.js}"></script>
    <script th:src="@{/js/plugins/slimscroll/jquery.slimscroll.min.js}"></script>

    <!-- Flot -->
    <script th:src="@{/js/plugins/flot/jquery.flot.js}"></script>
    <script th:src="@{/js/plugins/flot/jquery.flot.tooltip.min.js}"></script>
    <script th:src="@{/js/plugins/flot/jquery.flot.spline.js}"></script>
    <script th:src="@{/js/plugins/flot/jquery.flot.resize.js}"></script>
    <script th:src="@{/js/plugins/flot/jquery.flot.pie.js}"></script>
    <script th:src="@{/js/plugins/flot/jquery.flot.symbol.js}"></script>
    <script th:src="@{/js/plugins/flot/jquery.flot.time.js}"></script>

    <!-- Peity -->
    <script th:src="@{/js/plugins/peity/jquery.peity.min.js}"></script>
    <script th:src="@{/js/demo/peity-demo.js}"></script>

    <!-- Custom and plugin javascript -->
    <script th:src="@{/js/inspinia.js}"></script>
    <script th:src="@{/js/plugins/pace/pace.min.js}"></script>

    <!-- jQuery UI -->
    <script th:src="@{/js/plugins/jquery-ui/jquery-ui.min.js}"></script>

    <!-- Jvectormap -->
    <script th:src="@{/js/plugins/jvectormap/jquery-jvectormap-2.0.2.min.js}"></script>
    <script th:src="@{/js/plugins/jvectormap/jquery-jvectormap-world-mill-en.js}"></script>

    <!-- EayPIE -->
    <script th:src="@{/js/plugins/easypiechart/jquery.easypiechart.js}"></script>

    <!-- Sparkline -->
    <script th:src="@{/js/plugins/sparkline/jquery.sparkline.min.js}"></script>

    <!-- Sparkline demo data  -->
    <script th:src="@{/js/demo/sparkline-demo.js}"></script>

    <script  th:inline="javascript" type="text/javascript">
    		
    		// 按类别1 统计数量
    		function countCategory1Group() {
    			$.ajax({
		      		type: "GET",
		           	url: "/chinabook/category1group",
		           	contentType: "application/json; charset=utf-8",
		        		success: function(msg){
		        			var result = msg.result;
		        			$("#first").html('<div class="ibox-title"><span class="label label-success pull-right">第一</span><h5>'+result[0].category1+'类</h5></div><div class="ibox-content"><h1 class="no-margins">'+ result[0].cnt +'</h1></div>');
		        			$("#sec").html('<div class="ibox-title"><span class="label label-info pull-right">第二</span><h5>'+result[1].category1+'类</h5></div><div class="ibox-content"><h1 class="no-margins">'+ result[1].cnt +'</h1></div>');
		        			$("#third").html('<div class="ibox-title"><span class="label label-primary pull-right">第三</span><h5>'+result[2].category1+'类</h5></div><div class="ibox-content"><h1 class="no-margins">'+ result[2].cnt +'</h1></div>');
		        			$("#fourth").html('<div class="ibox-title"><span class="label label-danger pull-right">第四</span><h5>'+result[3].category1+'类</h5></div><div class="ibox-content"><h1 class="no-margins">'+ result[3].cnt +'</h1></div>');
		       		},
		     		error: function(){
		     			alert("系统异常！");
		       		}
				});
    		}
    		/*<![CDATA[*/
    		// 按类别2 统计数量
    		function countCategory2Group() {
    			$.ajax({
		      		type: "GET",
		           	url: "/chinabook/category2group",
		           	contentType: "application/json; charset=utf-8",
		        		success: function(msg){
		        			var result = msg.result;
		        			var tt='';
		        			for(var i=0;i<result.length;i++) {
		        				tt = tt + '<div class="feed-element"><div><strong>'+result[i].category2+'类</strong><h6><strong>'+result[i].cnt+' （册）</strong></h6></div></div>'
		        			}
		        			$("#category2").html(tt);
		       		},
		     		error: function(){
		     			alert("系统异常！");
		       		}
				});
    		}
    		/*]]>*/
    		
    		/*<![CDATA[*/
    		// 价格排名
    		function rankbysellprice() {
    			$.ajax({
		      		type: "GET",
		           	url: "/chinabook/rankbysellprice",
		           	contentType: "application/json; charset=utf-8",
		        		success: function(msg){
		        			console.log(msg.result)
		        			var result = msg.result;
		        			var tt='';
		        			for(var i=0;i<result.length;i++) {
		        				tt = tt + '<div class="feed-element"><div><strong>'+result[i].bookName+'</strong><h6><strong>'+result[i].sellPrice+'（元）</strong></h6></div></div>'
		        			}
		        			$("#sellprice").html(tt);
		       		},
		     		error: function(){
		     			alert("系统异常！");
		       		}
				});
    		}
    		/*]]>*/
    		/*<![CDATA[*/
    		// 折扣排名
    		function rankbydiscount() {
    			$.ajax({
		      		type: "GET",
		           	url: "/chinabook/rankbydiscount",
		           	contentType: "application/json; charset=utf-8",
		        		success: function(msg){
		        			console.log(msg.result)
		        			var result = msg.result;
		        			var tt='';
		        			for(var i=0;i<result.length;i++) {
		        				tt = tt + '<div class="feed-element"><div><strong>'+result[i].bookName+'</strong><h6><strong>'+result[i].discount+' （折）</strong></h6></div></div>'
		        			}
		        			$("#discount").html(tt);
		       		},
		     		error: function(){
		     			alert("系统异常！");
		       		}
				});
    		}
    		/*]]>*/
    		
        $(document).ready(function() {
        		countCategory1Group();
        		countCategory2Group();
        		rankbysellprice();
        		rankbydiscount();
        });
    </script>
</body>
</html>
